{{ define "content" }}
    <div class="container">
        <div class="row">
            <h2> The search returned {{len .Genes}} genes </h2>
        </div>
        <div class="row">
            <table class="table table-hover">
                <thead>
                    <th>
                       Gene
                    </th>
                    <th>
                        Summary
                    </th>
                    {{ range .Tissues }}
                        <th> {{.}} </th>
                    {{end}}
                </thead>
                {{range .Genes}}
                <tr>
                    <td class="col-md-2">
                        {{.Name}}
                    </td>
                    <td class="col-md-3"> {{.Summary}}  </td>
                    {{ range $index, $name := .Modules }}
                    <td class="col-md-2">
                        <a href="/modules/{{index $.Tissues $index}}/{{$name}}">
                            {{$name}} 
                        </a>
                    </td>
                    {{ end }} 
                </tr> 
                {{end}}
            </table>
        </div> 


        <div class="row">
            <h2> The search returned {{len .GeneSets}} gene sets </h2>
        </div>

        <div> 
            {{ range $index, $geneset := .GeneSets }} 
            <div class="row"> 
                <h3> <a
                    href="http://www.broadinstitute.org/gsea/msigdb/geneset_page.jsp?geneSetName={{$geneset.Name}}">
                    {{$geneset.Name}}</a> 
                </h3> 
                {{ range $tissue, $modules := $geneset.TissueSets }} 
                      <div class="col-md-4">
                          <h4> {{ $tissue }} </h4> 
                          <table class="table table-hover"
                              id="er-{{$geneset.Name}}-{{$tissue}}"> 
                        <thead> 
                            <th> Module </th> 
                            <th> p-value </th> 
                        </thead> 
                        {{ range $index, $module := $modules }}
                        <tr> 
                            <td> <a
                                    href="/modules/{{$tissue}}/{{$module.Name}}">{{$module.Name}}</a></td>
                            <td data-sort-method='numeric'> {{$module.Pvalue}} </td> 
                        </tr> 
                        {{ end }}
                    </table> 
                    </div> 

                    <script> 
                        $(function(){
                            new Tablesort(document.getElementById('er-{{$geneset.Name}}-{{$tissue}}')); 
                        });
                    </script> 
                {{ end }} 
            </div> 
            {{ end }} 
        </div> 

    </div>

<script src="/public/js/tablesort.numeric.js" type="text/javascript" charset="utf-8"></script>


{{ end }} 
